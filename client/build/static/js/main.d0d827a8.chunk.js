(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{195:function(e,a,t){},204:function(e,a,t){e.exports=t(456)},227:function(e,a,t){},426:function(e,a,t){},444:function(e,a,t){},445:function(e,a,t){},455:function(e,a,t){},456:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(34),c=t.n(r),o=t(35),s=t(36),i=t(25),u=t(39),m=t(38),d=t(21),g=t.n(d),p=t(11),f=t(8),h=(t(227),t(56)),E=t(87),b=t.n(E),y=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={hidden:!0},n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({hidden:!1})}),this.props.waitBeforeShow)}},{key:"render",value:function(){return this.state.hidden?"":this.props.children}}]),t}(l.a.Component),v={styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#2b0001"},{visibility:"on"}]}],disableDefaultUI:!1,zoomControl:!0};function w(e){b.a.setApiKey("AIzaSyDZpId9vU-4E_1JioDeZ1IV58nOK5ygtZE"),b.a.setLanguage("en");var a=Object(n.useState)([e]),t=Object(f.a)(a,2),r=t[0],c=t[1];Object(n.useEffect)((function(){c(e),e.wineList.map((function(e){b.a.fromAddress(e.address).then((function(a){return e.coords=a.results[0].geometry.location,e}),(function(e){console.error(e)}))}))}),[e,r]);var o=Object(h.withScriptjs)(Object(h.withGoogleMap)((function(a){return l.a.createElement(h.GoogleMap,{className:"map",defaultZoom:1.5,options:v,defaultCenter:{lat:0,lng:0}},e.wineList.map((function(e){return l.a.createElement(h.Marker,{position:e.coords,key:e._id},l.a.createElement(h.InfoWindow,null,l.a.createElement("div",null,e.wine_name," ",e.year)))})))})));return l.a.createElement(y,{waitBeforeShow:700},l.a.createElement(o,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDZpId9vU-4E_1JioDeZ1IV58nOK5ygtZE&v=3.exp&libraries=geometry,drawing,places",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"545px"}}),mapElement:l.a.createElement("div",{style:{height:"100%"}})}))}var C=t(457),N=t(465),O=t(466),j=t(458);t(426);function S(e){var a=e.setWines,t=e.fullWineList,r=(e.wines,Object(n.useState)("Color")),c=Object(f.a)(r,2),o=c[0],s=c[1],i=Object(n.useState)("Country"),u=Object(f.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)("Size"),p=Object(f.a)(g,2),h=p[0],E=p[1],b=function(e){var n=e.target.id;console.log("colorclicked",t),a((function(){return t.filter((function(e){return e.color===n}))})),s(e.target.id),d("All Countries"),E("All Sizes")},y=function(e){var n=e.target.id;a((function(){return t.filter((function(e){return e.country===n}))})),d(e.target.id),E("All Sizes"),s("All Colors")},v=function(e){var n=e.target.id;a((function(){return t.filter((function(e){return e.size===n}))})),E(e.target.id),s("All Colors"),d("All Countries")},w=Object(n.useState)(!1),S=Object(f.a)(w,2),k=S[0],A=S[1],P=Object(n.useState)(!1),_=Object(f.a)(P,2),T=_[0],U=_[1],z=Object(n.useState)(!1),G=Object(f.a)(z,2),I=G[0],D=G[1],B=function(e){return console.log("e.target.val",e.target.value)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{isOpen:k,toggle:function(){return A((function(e){return!e}))},onChange:B,inline:"true"},l.a.createElement(N.a,{className:"button",caret:!0},o),l.a.createElement(O.a,null,l.a.createElement(j.a,{id:"White",onClick:b},"White"),l.a.createElement(j.a,{id:"Rose",onClick:b},"Rose"),l.a.createElement(j.a,{id:"Red",onClick:b},"Red"),l.a.createElement(j.a,{id:"All Colors",onClick:function(e){console.log("colorall",t),a((function(){return t.filter((function(e){return e.color,e.color,["Red"===e.color]}))})),s(e.target.id),d("All Countries"),E("All Sizes")}},"All"))),l.a.createElement(C.a,{isOpen:T,toggle:function(){return U((function(e){return!e}))},onChange:function(e){return console.log("e.target.val",e.target.value)},inline:"true"},l.a.createElement(N.a,{className:"button",caret:!0},m),l.a.createElement(O.a,null,l.a.createElement(j.a,{id:"Canada",onClick:y},"Canada"),l.a.createElement(j.a,{id:"France",onClick:y},"France"),l.a.createElement(j.a,{id:"Germany",onClick:y},"Germany"),l.a.createElement(j.a,{id:"Greece",onClick:y},"Greece"),l.a.createElement(j.a,{id:"Italy",onClick:y},"Italy"),l.a.createElement(j.a,{id:"New Zealand",onClick:y},"New Zealand"),l.a.createElement(j.a,{id:"Portugal",onClick:y},"Portugal"),l.a.createElement(j.a,{id:"South Africa",onClick:y},"South Africa"),l.a.createElement(j.a,{id:"Spain",onClick:y},"Spain"),l.a.createElement(j.a,{id:"USA",onClick:y},"U.S.A."),l.a.createElement(j.a,{id:"All Countries",onClick:function(e){a((function(){return t.filter((function(e){return e.country,e.country,e.country,e.country,e.country,e.country,e.country,e.country,["USA"===e.country]}))})),d(e.target.id),E("All Sizes"),s("All Colors")}},"All"))),l.a.createElement(C.a,{isOpen:I,toggle:function(){return D((function(e){return!e}))},onChange:B,inline:"true"},l.a.createElement(N.a,{className:"button",caret:!0},h),l.a.createElement(O.a,null,l.a.createElement(j.a,{id:"Glass",onClick:v},"Glass"),l.a.createElement(j.a,{id:"Bottle",onClick:v},"Bottle"),l.a.createElement(j.a,{id:"All Sizes",onClick:function(e){a((function(){return t.filter((function(e){return e.size,["Bottle"===e.size]}))})),E(e.target.id),s("All Colors"),d("All Countries")}},"All"))))}t(115);var k=t(461),A=t(462),P=t(463),_=function(){return g.a.get("/api/wines")},T=function(e){return g.a.post("/api/wines",e)};t(444);function U(e){var a=e.children;return l.a.createElement("div",{className:"list-overflow-container"},l.a.createElement("ul",{className:"list-group"},a))}function z(e){var a=e.children;return l.a.createElement("li",{className:"list-group-item"},a)}var G=t(199),I=t(464),D=t(459),B=t(460),R=(t(445),function(e){var a=Object(n.useState)(!1),t=Object(f.a)(a,2),r=t[0],c=t[1],o=function(){return c(!r)};return l.a.createElement("div",null,l.a.createElement(G.a,{onClick:o,className:"info"},"info"),l.a.createElement(I.a,{isOpen:r,toggle:o,className:"wine"},l.a.createElement(D.a,{toggle:o},l.a.createElement("h2",null,l.a.createElement("strong",{className:"strong"},e.wine.wine_name),' "',e.wine.full_name,'"'),l.a.createElement("h4",null,e.wine.year," ",e.wine.region,", ",e.wine.country," ",l.a.createElement("strong",{className:"strong"}," ",e.wine.PPG," | ",e.wine.PPB))),l.a.createElement(B.a,null,l.a.createElement("strong",{className:"strong"},"Style: "),e.wine.carbonation," ",e.wine.color,l.a.createElement("br",null),l.a.createElement("strong",{className:"strong"},"Varietal: "),e.wine.grape_detail,l.a.createElement("br",null),l.a.createElement("strong",{className:"strong"},"Notes: "),e.wine.details)))});t(195);function W(){var e=Object(n.useState)([]),a=Object(f.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),o=Object(f.a)(c,2),s=o[0],i=o[1];return Object(n.useEffect)((function(){_().then((function(e){r(e.data),i(e.data)})).catch((function(e){return console.log(e)}))}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(k.a,{className:"header componenets"},l.a.createElement(A.a,{lg:8}),t.length>0&&l.a.createElement(S,{fullWineList:s,setWines:r,wines:t,className:"filters"})),l.a.createElement(P.a,{fluid:!0,className:"main"},l.a.createElement(k.a,null,l.a.createElement(A.a,{lg:8},l.a.createElement(P.a,{fluid:!0,className:"map"},l.a.createElement(w,{wineList:t}))),l.a.createElement(A.a,{lg:4},l.a.createElement(P.a,{fluid:!0,className:"components"},t.length?l.a.createElement(U,null,t.map((function(e){return l.a.createElement(z,{key:e._id,wine:e},l.a.createElement(k.a,null,l.a.createElement(A.a,{lg:10},l.a.createElement("strong",{wine:e},e.wine_name,' "',e.full_name,'"'),l.a.createElement("div",null,e.year," ",e.grape," ",e.PPG," | ",e.PPB)),l.a.createElement(A.a,{lg:2},l.a.createElement(R,{className:"info",wine:e}," "))))}))):l.a.createElement("h3",null,"No Results to Display"))))))}var L=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){var e;return Object(o.a)(this,t),(e=a.call(this)).state={username:"",password:"",confirmPassword:""},e.handleSubmit=e.handleSubmit.bind(Object(i.a)(e)),e.handleChange=e.handleChange.bind(Object(i.a)(e)),e}return Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({[e.target.name]:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;console.log("sign-up handleSubmit, username: "),console.log(this.state.username),e.preventDefault(),g.a.post("/api/user/",{username:this.state.username,password:this.state.password}).then((function(e){console.log(e),e.data.errmsg?console.log("username already taken"):(console.log("successful signup"),a.setState({redirectTo:"/login"}))})).catch((function(e){console.log("signup error: "),console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"SignupForm"},l.a.createElement("h4",null,"Sign up"),l.a.createElement("form",{className:"form-horizontal"},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"},l.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"},l.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password: ")),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group "},l.a.createElement("div",{className:"col-7"}),l.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Sign up"))))}}]),t}(n.Component),M=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){var e;return Object(o.a)(this,t),(e=a.call(this)).state={username:"",password:"",redirectTo:null},e.handleSubmit=e.handleSubmit.bind(Object(i.a)(e)),e.handleChange=e.handleChange.bind(Object(i.a)(e)),e}return Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({[e.target.name]:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),console.log("handleSubmit"),g.a.post("/api/user/login",{username:this.state.username,password:this.state.password}).then((function(e){console.log("login response: "),console.log(e),200===e.status&&(a.props.updateUser({loggedIn:!0,username:e.data.username}),a.setState({redirectTo:"/"}))})).catch((function(e){console.log("login error: "),console.log(e)}))}},{key:"render",value:function(){return this.state.redirectTo?l.a.createElement(p.a,{to:{pathname:this.state.redirectTo}}):l.a.createElement("div",null,l.a.createElement("h4",null,"Login"),l.a.createElement("form",{className:"form-horizontal"},l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"},l.a.createElement("label",{className:"form-label",htmlFor:"username"},"Username")),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",type:"text",id:"username",name:"username",placeholder:"Username",value:this.state.username,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"col-1 col-ml-auto"},l.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password: ")),l.a.createElement("div",{className:"col-3 col-mr-auto"},l.a.createElement("input",{className:"form-input",placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),l.a.createElement("div",{className:"form-group "},l.a.createElement("div",{className:"col-7"}),l.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:this.handleSubmit,type:"submit"},"Login"))))}}]),t}(n.Component),F=t(55);function x(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("input",Object.assign({className:"form-control"},e)))}function V(){var e=Object(n.useState)([{name:"Menti",vintage:2018,address:"UFFICI /HEADQUARTER, via Dr. Bruzzo, 24, 36053 Gambellara VI, Italy"},{name:"Raventos i Blanc",vintage:2017,address:"Pla\xe7a del Roure, S/N, 08770 Sant Sadurn\xed d'Anoia, Barcelona, Spain"}]),a=Object(f.a)(e,2),t=(a[0],a[1],Object(n.useState)([])),r=Object(f.a)(t,2),c=r[0],o=r[1],s=Object(n.useState)({}),i=Object(f.a)(s,2),u=i[0],m=i[1];function d(e){var a=e.target,t=a.name,n=a.value;m(Object(F.a)(Object(F.a)({},u),{},{[t]:n}))}return Object(n.useEffect)((function(){_().then((function(e){return o(e.data)})).catch((function(e){return console.log(e)}))}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(k.a,{className:"header componenets"},l.a.createElement("h2",null,"Silly Wine"),l.a.createElement("br",null),l.a.createElement(S,{wines:c,className:"components"})),l.a.createElement(P.a,{fluid:!0,className:"main"},l.a.createElement(k.a,null,l.a.createElement(A.a,{lg:8},l.a.createElement(P.a,{fluid:!0,className:"map"},l.a.createElement(w,{wineList:c}))),l.a.createElement(A.a,{lg:4},l.a.createElement(P.a,{fluid:!0,className:"components"},c.length?l.a.createElement(U,null,c.map((function(e){return l.a.createElement(z,{key:e._id,wine:e},l.a.createElement(R,{wine:e}," "),l.a.createElement("strong",{wine:e},e.wine_name,' "',e.full_name,'"'),l.a.createElement("div",null,e.year," ",e.grape))}))):l.a.createElement("h3",null,"No Results to Display")),l.a.createElement("form",null,l.a.createElement(x,{onChange:d,name:"title",placeholder:"Title (required)"}),l.a.createElement(x,{onChange:d,name:"author",placeholder:"Author (required)"}))))))}t(455);function Z(){var e=Object(n.useState)([]),a=Object(f.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)([]),o=Object(f.a)(c,2),s=o[0],i=o[1],u=Object(n.useState)({}),m=Object(f.a)(u,2),d=m[0],g=m[1];function p(){_().then((function(e){r(e.data),i(e.data)})).catch((function(e){return console.log(e)}))}function h(e){var a=e.target,t=a.name,n=a.value;g(Object(F.a)(Object(F.a)({},d),{},{[t]:n}))}return Object(n.useEffect)((function(){p()}),[]),l.a.createElement("div",{className:"body"},l.a.createElement(k.a,{className:"header componenets"},l.a.createElement(A.a,{lg:8}),t.length>0&&l.a.createElement(S,{fullWineList:s,setWines:r,wines:t,className:"filters"})),l.a.createElement(P.a,{fluid:!0,className:"main"},l.a.createElement(k.a,null,l.a.createElement(A.a,{lg:8},l.a.createElement(P.a,{fluid:!0,className:"addWine"},l.a.createElement("form",null,l.a.createElement(x,{onChange:h,name:"wine_name",placeholder:"Producer Name"}),l.a.createElement(x,{onChange:h,name:"full_name",placeholder:"Vineyard or label name"}),l.a.createElement(x,{onChange:h,name:"year",placeholder:"Vintage"}),l.a.createElement(x,{onChange:h,name:"color",placeholder:"Red, White, or Rose?"}),l.a.createElement(x,{onChange:h,name:"carbonation",placeholder:"Still or Sparkling?"}),l.a.createElement(x,{onChange:h,name:"grape",placeholder:"Varietal or style of blend"}),l.a.createElement(x,{onChange:h,name:"grape_detail",placeholder:"List of Varietals"}),l.a.createElement(x,{onChange:h,name:"country",placeholder:"Country"}),l.a.createElement(x,{onChange:h,name:"region",placeholder:"Region"}),l.a.createElement(x,{onChange:h,name:"address",placeholder:"Address for map"}),l.a.createElement(x,{onChange:h,name:"PPB",placeholder:"Price per bottle"}),l.a.createElement(x,{onChange:h,name:"PPG",placeholder:"Price per glass (if available)"}),l.a.createElement(x,{onChange:h,name:"size",placeholder:"Glass or Bottle?"}),l.a.createElement(x,{onChange:h,name:"details",placeholder:"Enter tasting notes here"}),l.a.createElement("button",{className:"btn btn-primary col-1 col-mr-auto",onClick:function(e){e.preventDefault(),d.wine_name&&d.year&&T({wine_name:d.wine_name,year:d.year,color:d.color,carbonation:d.carbonation,grape:d.grape,grape_detail:d.grape_detail,full_name:d.full_name,country:d.country,region:d.region,address:d.address,PPB:d.PPB,size:d.size,PPG:d.PPG,details:d.details,date:new Date(Date.now())}).then((function(){return g({wine_name:"",year:""})})).then((function(){return p()})).catch((function(e){return console.log(e)}))},type:"submit"},"Submit Wine")))),l.a.createElement(A.a,{lg:4},l.a.createElement(P.a,{fluid:!0,className:"components"},t.length?l.a.createElement(U,null,t.map((function(e){return l.a.createElement(z,{key:e._id,wine:e},l.a.createElement(k.a,null,l.a.createElement(A.a,{lg:10},l.a.createElement("strong",{wine:e},e.wine_name,' "',e.full_name,'"'),l.a.createElement("div",null,e.year," ",e.grape," ",e.PPG," | ",e.PPB)),l.a.createElement(A.a,{lg:2},l.a.createElement(R,{className:"info",wine:e}," "))))}))):l.a.createElement("h3",null,"No Results to Display"))))))}var J=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){var e;return Object(o.a)(this,t),(e=a.call(this)).state={loggedIn:!1,username:null},e.getUser=e.getUser.bind(Object(i.a)(e)),e.componentDidMount=e.componentDidMount.bind(Object(i.a)(e)),e.updateUser=e.updateUser.bind(Object(i.a)(e)),e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"updateUser",value:function(e){this.setState(e)}},{key:"getUser",value:function(){var e=this;g.a.get("/api/user/").then((function(a){console.log("Get user response: "),console.log(a.data.user),a.data.user?(console.log("Get User: There is a user saved in the server session: "),e.setState({loggedIn:!0,username:a.data.user.username})):(console.log("Get user: no user"),e.setState({loggedIn:!1,username:null}))})).catch((function(e){return console.log("err",e)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},this.state.loggedIn&&l.a.createElement("p",null,"Join the party ",this.state.username),l.a.createElement(p.b,{path:"/",component:W,exact:!0}),l.a.createElement(p.b,{path:"/login",render:function(){return l.a.createElement(M,{updateUser:e.updateUser})}}),l.a.createElement(p.b,{path:"/signup",render:function(){return l.a.createElement(L,null)}}),l.a.createElement(p.b,{path:"/suggest",component:V}),l.a.createElement(p.b,{path:"/addWine",component:Z}))}}]),t}(n.Component);var q=t(64);c.a.render(l.a.createElement(q.a,null,l.a.createElement(J,null)),document.getElementById("root")),function(){function e(){return function(e){for(var a="=".repeat((4-e.length%4)%4),t=(e+a).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),l=new Uint8Array(n.length),r=0;r<n.length;++r)l[r]=n.charCodeAt(r);return l}("BJthRQ5myDgc7OSXzPCMftGw-n16F7zQBEN7EUD6XxcfTTvrLGWSIG7y_JxiWtVlCFua0S8MTB5rPziBqNx1qIo")}var a="".concat("","/sw.js");navigator.serviceWorker.register(a).then((function(a){return console.warn("response",a),a.pushManager.getSubscription().then((function(t){a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e()})}))}))}()}},[[204,1,2]]]);
//# sourceMappingURL=main.d0d827a8.chunk.js.map